<!--
title: 16 - Using two-factor authentication
featured: true
-->

# Using Two-Factor Authentication

To meet the increasing need for strong digital security, npm has introduced two-factor authentication (2FA).  Two-factor authentication prevents unauthorized access to your account and projects by confirming your identity using two methods. You have probably used 2FA before. For example, if you need to provide a code from your phone after you log in to your online bank account, your bank has enabled 2FA.  

After you set up 2FA, npm authenticates you with your password, as usual, then presents a unique QR code. You can either scan the QR code, or provide a one-time password (OTP). OTP's, generated by a TOTP code-generator application, last for less than a minute.  

Set two-factor authentication to restrict access to your account, and to limit or prevent the ability of others to publish or change your code. 
 
## Preparation

To use 2FA with your npm account, you will need an application that can scan QR codes, or an application that can generate an OTP. If you don't have one, please download a product such as [Authy](https://authy.com/download/) or 
[Google Authenticator](https://support.google.com/accounts/answer/1066447). 

(Note: npm will not use SMS (text-to-phone) as a method for authenticating users.)

## Levels of Authentication 
  
There are two levels of authentication, *auth-only* and *auth-and-writes*.

If you enable 2FA in **auth-only** mode, npm will prompt for the 2nd factor when you:

* log in
* make changes to your profile
* remove 2FA

If you enable 2FA in **auth-and-writes** mode, which is the default, npm will prompt for an extra password when you:

* log in
* make changes to your profile
* create or revoke tokens 
* publish packages 
* change access
* change your password
* make other sensitive changes to packages
* remove 2FA
* setting versions


###What happens if you lose the 2nd-factor device? 

After enabling 2FA, npm will generate recovery codes that will allow you to get back online if you lose your device or forget your password. This feature is explained in more detail below. 

##How Do I Enable 2FA? 

To enable 2FA, use the command line interface.  Here are the main commands: 

  `npm profile enable-2fa [auth-only|auth-and-writes]`
  `npm profile disable-2fa` 

### How to Enable Auth-and-Writes Two-Factor Authentication

To require two-factor authentication when logging in, writing, publishing, and making other changes, type either command. (The auth-and-writes setting is the default.)
  
        npm profile enable-2fa
        npm profile enable-2fa auth-and-writes 
      
npm will return this message:
            
        > npm notice profile 
        Enabling two factor authentication for auth-and-writes   
   
### How to Enable Auth-Only Two-Factor Authentification

If you want to enable 2FA, but you only want it to be activated when you first login or make changes to your profile, use the *auth-only* setting. 

        npm profile enable-2fa auth-only
        
 npm will return this message: 
 
        $ npm profile enable-2fa auth-only
        > npm notice profile 
        Enabling two factor authentication for auth-only

#### How to Enter the Second Factor 

After you specify the setting you want to enable, npm will present a QR code:

![Masked QR Code And Prompt](/images/qr_code_and_prompt_masked.png)

If your authenticator can read QR codes, scan it. If not, use your authenticator to generate an OTP code, and enter it after this prompt:  

````
    Add an OTP code from your authenticator:
````

After you have successfully provided the second factor,  npm will display this message:

    2FA successfully enabled. 
    Below are your recovery codes, please print these out. 
    You will need these to recover access to your account 
    if you lose your authentication device.
 
#### Recovery Codes 

After setting up TFA, npm will generate recovery codes that will appear on your screen. Please print them and save them as described. Note: Some authenticators provide a method for you to store recovery codes.

    >**WARNING**: You must save these codes in a location that is not  
    not normally near the device you use to authenticate. If you lose
    this device, or forget your password, these codes will be your
    onlyw ay to get back online.

### How to Remove Two-Factor Authentication from your Profile

To remove 2FA from your profile, type this command:

```
    npm profile disable-2fa
```
   
npm will display:

````
    > npm password:   
````
Enter your npm password as prompted, then npm will display: 

```
   >Enter one-time password from your authenticator: 123456
``` 
 npm will confirm: 

```
   Two factor authentication disabled.
   
```

###How do send an OTP Value from the command line? 

You can publish from the command line by sending the OTP in this manner: 

```
npm publish --otp=123456
```

##What do I do if I Misplace my Second Device/Factor?

If you lose the device that provided second-factor authentication:

1. Login normally using your login and npm password.
2. When prompted for an OTP, enter a recovery code.
3. Disable 2FA, using another recovery code.
4. Re-enable 2FA, using a different two-factor method. 

### Notes

The commands `npm profile enable-tfa` and `npm profile enable-2fa`, with or without dash `'-'`, are aliases. Similarly, `npm profile disable-tfa` and `npm profile disable-2fa`, with or without dash `'-'` are aliases.

Settings you define using the Command Line Interface (CLI) will also apply to the website. At this time, 2FA can be set only from the CLI. 
